FIND_PACKAGE(Wayland)

if (WAYLAND_FOUND)
    FIND_PACKAGE(Cairo REQUIRED)
    FIND_PACKAGE(Pango REQUIRED)
    FIND_PACKAGE(XKBCommon REQUIRED)
    INCLUDE(Wayland)
    WAYLAND_ADD_PROTOCOL_CLIENT(proto-xdg-shell "xdg-shell.xml" xdg-shell)
    INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${WAYLAND_CLIENT_INCLUDE_DIR} ${XKBCOMMON_INCLUDE_DIR} ${CAIRO_INCLUDE_DIRS} ${PANGO_INCLUDE_DIRS})
    ADD_LIBRARY(bemenu-renderer-wayland SHARED wayland.c registry.c window.c ${proto-xdg-shell})
    SET_TARGET_PROPERTIES(bemenu-renderer-wayland PROPERTIES PREFIX "")
    TARGET_LINK_LIBRARIES(bemenu-renderer-wayland ${WAYLAND_CLIENT_LIBRARIES} ${XKBCOMMON_LIBRARIES} ${CAIRO_LIBRARIES} ${PANGO_LIBRARIES})
    INSTALL(TARGETS bemenu-renderer-wayland DESTINATION lib/bemenu)
endif ()
